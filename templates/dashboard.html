{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-md-7">
    <h3>New Submission</h3>
    <hr />
    <form class="submission-prediction" id="submission-form" action="/" method="post">
      <h5 class="predictions-heading">Matches</h5>
      <textarea name="predictions" id="predictions" class="form-control" form="submission-form"
        placeholder="Copy paste your csv file (along with the headers) here as it is..." required autofocus></textarea>
      <h5 class="code-heading">Code Snippet</h5>
      <textarea name="code" id="code" class="form-control" form="submission-form"
        placeholder="Copy paste your code here as it is..." required></textarea>
      <button class="btn btn-lg btn-primary btn-block" type="submit">Submit</button>
  </div>

  <div class="col-md-5">
    <h3>History</h3>
    <hr />
    {% if history %}
    <table class="table table-hover">
    <thead> 
      <tr>
        <th></th> 
        <th>Submitted on</th> 
        <th>F1 Measure</th> 
        <th>Details</th> 
      </tr> 
    </thead>
    <tbody>
    {% for h in history %}
      <tr>
        <th>{{ loop.index }}</th>
        <th>{{ h.timestamp.strftime('%b %d, %H:%M') }}</th>
        <th>{{ "%.2f" | format(h.F1) }}</th>
        <th><a href="/submission/{{h.id}}">View</a></th>
      </tr>
    {% endfor %}
    </tbody>
    </table>
    {% else %}
    <p>No submissions yet</p>
    {% endif %}

  </div>
</div>

{% endblock %}
